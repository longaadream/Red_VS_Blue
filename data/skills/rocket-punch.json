{"id":"rocket-punch","name":"ç«ç®­é‡æ‹³","description":"é€‰æ‹©ä¸€ä¸ªåŒè¡Œæˆ–åŒåˆ—çš„æ ¼å­ï¼Œå‘è¯¥æ–¹å‘å†²åˆºå¹¶å¯¹è·¯å¾„ä¸Šçš„æ•Œäººé€ æˆä¼¤å®³","icon":"ğŸ‘Š","kind":"active","type":"normal","cooldownTurns":2,"maxCharges":0,"powerMultiplier":2.0,"actionPointCost":2,"code":"function executeSkill(context) { const sourcePiece = context.piece; const targetPosition = selectTarget({ type: 'grid', range: 5, filter: 'all' }); if (!targetPosition || targetPosition.needsTargetSelection) { return targetPosition; } if (sourcePiece.x !== targetPosition.x && sourcePiece.y !== targetPosition.y) { return { message: 'ç›®æ ‡æ ¼å­å¿…é¡»ä¸å½“å‰ä½ç½®åœ¨åŒä¸€è¡Œæˆ–åŒä¸€åˆ—', success: false }; } const dx = targetPosition.x - sourcePiece.x; const dy = targetPosition.y - sourcePiece.y; const distance = Math.max(Math.abs(dx), Math.abs(dy)); if (distance === 0) { return { message: 'ç›®æ ‡æ ¼å­ä¸èƒ½æ˜¯å½“å‰ä½ç½®', success: false }; } const directionX = dx !== 0 ? (dx > 0 ? 1 : -1) : 0; const directionY = dy !== 0 ? (dy > 0 ? 1 : -1) : 0; let hitEnemy = false; let damageResult = null; for (let step = 1; step <= distance; step++) { const checkX = sourcePiece.x + directionX * step; const checkY = sourcePiece.y + directionY * step; const enemyAtPosition = context.battle.pieces.find(piece => piece.x === checkX && piece.y === checkY && piece.playerId !== sourcePiece.playerId && piece.currentHp > 0); if (enemyAtPosition) { const damageValue = Math.round(sourcePiece.attack * context.skill.powerMultiplier); damageResult = dealDamage(sourcePiece, enemyAtPosition, damageValue, 'physical', context.battle, context.skill.id); hitEnemy = true; break; } } sourcePiece.x = targetPosition.x; sourcePiece.y = targetPosition.y; if (hitEnemy && damageResult) { return { message: sourcePiece.templateId + 'ä½¿ç”¨ç«ç®­é‡æ‹³å†²åˆºå¹¶å¯¹æ•Œäººé€ æˆ' + damageResult.damage + 'ç‚¹ä¼¤å®³', success: true }; } else { return { message: sourcePiece.templateId + 'ä½¿ç”¨ç«ç®­é‡æ‹³å†²åˆºåˆ°æ–°ä½ç½®', success: true }; } }","previewCode":"function calculatePreview(piece, skillDef) { const damageValue = Math.round(piece.attack * skillDef.powerMultiplier); return { description: 'é€‰æ‹©åŒè¡Œæˆ–åŒåˆ—çš„æ ¼å­å†²åˆºï¼Œå¯¹è·¯å¾„ä¸Šçš„æ•Œäººé€ æˆ' + damageValue + 'ç‚¹ä¼¤å®³ï¼ˆç›¸å½“äºæ”»å‡»åŠ›200%ï¼‰', expectedValues: { damage: damageValue, range: 5 } }; }","range":"single"}